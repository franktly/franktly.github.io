<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Git,GitHub,SVN,版本管理," />





  <link rel="alternate" href="/atom.xml" title="Just Do It" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Git简介
Git 是一个免费的、分布式版本控制工具，或是一个强调了速度快的源代码管理工具">
<meta property="og:type" content="article">
<meta property="og:title" content="Git使用总结">
<meta property="og:url" content="http://www.franktly.com/2016/01/23/Git使用总结/index.html">
<meta property="og:site_name" content="Just Do It">
<meta property="og:description" content="Git简介
Git 是一个免费的、分布式版本控制工具，或是一个强调了速度快的源代码管理工具">
<meta property="og:image" content="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fcentralization.png">
<meta property="og:image" content="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fjizhongshi.png">
<meta property="og:image" content="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fdistributed.png">
<meta property="og:image" content="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Ffenbushi.png">
<meta property="og:image" content="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fgit_three_zones.png">
<meta property="og:updated_time" content="2016-01-24T07:15:25.223Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git使用总结">
<meta name="twitter:description" content="Git简介
Git 是一个免费的、分布式版本控制工具，或是一个强调了速度快的源代码管理工具">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Git使用总结 | Just Do It </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Just Do It</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Love Read | Film | Song | Snooker</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'XPdxkgT49SMVFsPQM2pf','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Git使用总结
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-01-23T00:00:00+08:00" content="2016-01-23">
              2016-01-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/01/23/Git使用总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/23/Git使用总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h2 id="Git_u7B80_u4ECB"><a href="#Git_u7B80_u4ECB" class="headerlink" title="Git简介"></a>Git简介</h2><hr>
<p>Git 是一个免费的、分布式版本控制工具，或是一个强调了速度快的源代码管理工具<br><a id="more"></a></p>
<h3 id="u96C6_u4E2D_u5F0FVS_u5206_u5E03_u5F0F"><a href="#u96C6_u4E2D_u5F0FVS_u5206_u5E03_u5F0F" class="headerlink" title="集中式VS分布式"></a>集中式VS分布式</h3><h4 id="u96C6_u4E2D_u5F0F"><a href="#u96C6_u4E2D_u5F0F" class="headerlink" title="集中式"></a>集中式</h4><ol>
<li>概念：<br>集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。<br>集中式代码管理的核心是服务器，所有开发者在开始新一天的工作之前必须从服务器获取代码，然后开发，最后解决冲突，提交。所有的版本信息都放在服务器上。如 果脱离了服务器，开发者基本上是不可以工作的。</li>
<li>特点：<ul>
<li>服务器压力太大，数据库容量暴增。</li>
<li>如果不能连接到服务器上，基本上不可以工作，看上面第二步，如果服务器不能连接上，就不能提交，还原，对比等等。</li>
<li>不适合开源开发（开发人数非常非常多，但是Google app engine就是用svn的）。但是一般集中式管理的有非常明确的权限管理机制（例如分支访问限制），可以实现分层管理，从而很好的解决开发人数众多的问题。<br><img src="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fcentralization.png" alt="centralization"></li>
</ul>
</li>
<li>工作流程像是这样的：<br><img src="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fjizhongshi.png" alt="jzs"></li>
<li>代表：<br>SVN </li>
</ol>
<h4 id="u5206_u5E03_u5F0F"><a href="#u5206_u5E03_u5F0F" class="headerlink" title="分布式"></a>分布式</h4><ol>
<li>概念：<br>分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库，这样，你工作的时候，就不需要联网了，因为版本库就在你自己的电脑上。既然每个人电脑上都有一个完整的版本库，那多个人如何协作呢？比方说你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了<br>在实际使用分布式版本控制系统的时候，其实很少在两人之间的电脑上推送版本库的修改，因为可能你们俩不在一个局域网内，两台电脑互相访问不了，也可能今天你的同事病了，他的电脑压根没有开机。因此，分布式版本控制系统通常也有一台充当“中央服务器”的电脑，但这个服务器的作用仅仅是用来方便“交换”大家的修改，没有它大家也一样干活，只是交换修改不方便而已</li>
<li>特点：<ul>
<li>和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。而集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了</li>
<li>适合分布式开发，强调个体</li>
<li>公共服务器压力和数据量都不会太大。</li>
<li>速度快、灵活</li>
<li>任意两个开发者之间可以很容易的解决冲突。<br><img src="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fdistributed.png" alt="distributed"></li>
</ul>
</li>
<li>工作流程像是这样的：<br><img src="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Ffenbushi.png" alt="fbs"><br>分布式和集中式的最大区别在于开发者可以在本地提交。每个开发者机器上都有一个服务器的数据库</li>
<li>代表：<br>Git</li>
</ol>
<h3 id="Git_u5DE5_u4F5C_u533A_26amp_3B_u6682_u5B58_u533A_26amp_3B_u7248_u672C_u5E93"><a href="#Git_u5DE5_u4F5C_u533A_26amp_3B_u6682_u5B58_u533A_26amp_3B_u7248_u672C_u5E93" class="headerlink" title="Git工作区&amp;暂存区&amp;版本库"></a>Git工作区&amp;暂存区&amp;版本库</h3><p>Git分为三个区域：</p>
<ol>
<li>工作区(working directory): 本地电脑能看到的目录(即<code>git init</code>执行的文件目录)</li>
<li>暂存区(stage index):工作区一个隐藏目录<code>.git</code>，这个不算工作区，而是Git的版本库，里面的stage（或者叫index）称为暂存区</li>
<li>版本库(master): Git为我们自动创建的第一个分支master，以及指向master的一个指针叫<code>HEAD</code><br>区域的示意图如下：<br><img src="http://7xq8f9.com1.z0.glb.clouddn.com/pic%2Fgit_three_zones.png" alt="git-three-zones"><blockquote>
<p><code>git add</code>命令将使工作区的目录树写到暂存区中，暂存区中的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的ID被记录在暂存区的文件索引中<br><code>git commit</code>命令使暂存区的目录树写到版本库（对象库）中，master 分支会做相应的更新。即 master 指向的目录树就是提交时暂存区的目录树<br><code>git checkout</code>或者<code>git checkout --&lt;filename&gt;</code>命令会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动；即工作区未<code>add</code>的修改被丢弃，暂存区不变<br><code>git reset HEAD</code>命令会使暂存区的目录树会被重写，被 master 分支指向的目录树所替换，但是工作区不受影响；即暂存区未<code>commit</code>的修改被丢弃，工作区不变<br><code>git checkout HEAD</code>或者<code>git checkout HEAD &lt;filename&gt;</code>命令会用 HEAD 指向的 master 分支中的全部或者部分文件替换暂存区和以及工作区中的文件。这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动；即版本库不变，工作区未<code>add</code>和暂存区未<code>commit</code>的修改被丢弃<br><code>git rm --cached &lt;filename&gt;</code>命令会直接从暂存区删除文件，工作区则不做出改变<br><code>git diff</code>比较的是工作区和暂存区的差别<br><code>git diff --cached</code>比较的是暂存区和版本库的差别<br><code>git diff HEAD</code>比较的是工作区和版本库的差别</p>
</blockquote>
</li>
</ol>
<h2 id="Git_u5E38_u7528_u64CD_u4F5C"><a href="#Git_u5E38_u7528_u64CD_u4F5C" class="headerlink" title="Git常用操作"></a>Git常用操作</h2><hr>
<h3 id="u672C_u5730_u4ED3_u5E93Repository_u7BA1_u7406"><a href="#u672C_u5730_u4ED3_u5E93Repository_u7BA1_u7406" class="headerlink" title="本地仓库Repository管理"></a>本地仓库Repository管理</h3><h4 id="u521D_u59CB_u5316Git_u4ED3_u5E93"><a href="#u521D_u59CB_u5316Git_u4ED3_u5E93" class="headerlink" title="初始化Git仓库"></a>初始化Git仓库</h4><pre><code>git init
</code></pre><blockquote>
<p>仓库(repository)，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。</p>
<p>Git就把仓库建好了，而且告诉你是一个空的仓库（empty Git repository），当前目录下多了一个.git的目录，这个目录是Git来跟踪管理版本库的</p>
</blockquote>
<h4 id="u6DFB_u52A0_u6587_u4EF6_u5230Git_u4ED3_u5E93"><a href="#u6DFB_u52A0_u6587_u4EF6_u5230Git_u4ED3_u5E93" class="headerlink" title="添加文件到Git仓库"></a>添加文件到Git仓库</h4><p>Step 1.  添加文件到暂存区(stage index)</p>
<pre><code>git add &lt;filename&gt;
</code></pre><blockquote>
<p>可反复多次使用，添加多个文件<br>每次修改，如果不add到暂存区，那就不会加入到commit中</p>
</blockquote>
<p>Step 2. 提交文件到Git仓库</p>
<pre><code>git commit [-m]
</code></pre><blockquote>
<p>可选参数-m 后面添加提交的说明信息</p>
</blockquote>
<h4 id="u5220_u9664Git_u4ED3_u5E93_u4E2D_u7684_u6587_u4EF6"><a href="#u5220_u9664Git_u4ED3_u5E93_u4E2D_u7684_u6587_u4EF6" class="headerlink" title="删除Git仓库中的文件"></a>删除Git仓库中的文件</h4><p>首先<code>git rm</code> ,然后 <code>git commit</code>：</p>
<pre><code>git rm &lt;filename&gt;
git commit [-m]
</code></pre><blockquote>
<p>如果本地误删了，版本库中还没有删除，可以通过<code>git checkout -- &lt;filename&gt;</code>还原仓库中版本到工作区</p>
</blockquote>
<h4 id="u67E5_u770B_u7248_u672C_u72B6_u6001"><a href="#u67E5_u770B_u7248_u672C_u72B6_u6001" class="headerlink" title="查看版本状态"></a>查看版本状态</h4><pre><code>git status
</code></pre><blockquote>
<p>命令可以让我们时刻掌握工作区的状态</p>
</blockquote>
<pre><code>git diff &lt;filename&gt;
</code></pre><blockquote>
<p>可以查看修改内容<br>查看工作区和版本库里面最新版本的区别:<code>git diff HEAD -- &lt;filename&gt;</code></p>
</blockquote>
<h4 id="u64CD_u4F5C_u56DE_u9000"><a href="#u64CD_u4F5C_u56DE_u9000" class="headerlink" title="操作回退"></a>操作回退</h4><h5 id="u7248_u672C_u56DE_u9000"><a href="#u7248_u672C_u56DE_u9000" class="headerlink" title="版本回退"></a>版本回退</h5><p>版本回退指丢弃版本库的修改，从Git本地版本库中回退版本到本地工作区<br>在Git中，用HEAD表示当前版本，也就是最新的提交，上一个版本就是<code>HEAD^</code>，上上一个版本就是<code>HEAD^^</code>，当然往上100个版本写100个^比较容易数不过来，所以写成<code>HEAD~100</code><br>Git的版本回退速度非常快，因为Git在内部有个指向当前版本的<code>HEAD</code>指针，当你回退版本的时候，Git仅仅是把HEAD从指向回退的目标版本：<br>回退版本命令</p>
<pre><code>git reset --hard &lt;commit_id&gt;
</code></pre><blockquote>
<p><code>--hard</code>参数将版本库，暂存区和工作区的内容全部重置为某个commit_id的状态<br><code>git reset</code>默认是<code>git reset --mixed &lt;commit_id&gt;</code>可以让版本库重置到某个commit状态，该commit之后的commit不会保留，并重置暂存区，但是不改变工作区。即这个时候，上次提交的内容在工作区中还会存在<br><code>git revert</code>比<code>git reset</code>更加温柔一点，回滚到某次commit且该commit之后的提交记录都会保留，并且会在此基础上新建一个提交。对于已经<code>git push</code>到服务器上的内容作回滚，推荐使用<code>git revert</code><br>回退到指定的版本，commit_id可以通过<code>git log</code>命令查看<br>版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位，因为Git可能会找到多个版本号，就无法确定是哪一个了<br>回退到上一个版本：<code>git reset --hard HEAD^</code><br>回退到上上一个版本：<code>git reset --hard HEAD^^</code></p>
</blockquote>
<pre><code>git log
</code></pre><blockquote>
<p>查看提交历史，包含提交时间，作者和commit_id，以便确定要回退到哪个版本</p>
</blockquote>
<pre><code>git reflog
</code></pre><blockquote>
<p>查看命令历史，包含commit_id,命令操作信息等，以便确定要回到未来的哪个版本</p>
</blockquote>
<h5 id="u4FEE_u6539_u56DE_u9000"><a href="#u4FEE_u6539_u56DE_u9000" class="headerlink" title="修改回退"></a>修改回退</h5><p>修改回退指丢弃工作区或暂存区的修改，从Git本地暂存区或工作区中回退修改到本地工作区</p>
<ol>
<li><p>工作区修改回退<br>如果想丢弃工作的修改可以输入：</p>
<pre><code>git checkout -- &lt;filename&gt; 
</code></pre><p><code>git checkout</code>其实是会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动，无论工作区是修改还是删除，都可以“一键还原”，操作后就回到和暂存区一模一样的状态，这里有两种情况：</p>
<ul>
<li>一种是filename自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态（即丢弃了工作区的修改）</li>
<li>一种是filename已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态(即暂存区的修改仍然存在，只是工作区的修改丢弃了)<br>总之，就是让这个文件回到最近一次<code>git commit</code>或<code>git add</code>时的状态。<br><code>git checkout -- &lt;filename&gt;</code>命令中的<code>--</code>很重要，没有<code>--</code>，就变成了“切换到另一个分支”的命令</li>
</ul>
</li>
<li><p>暂存区修改回退<br>如果你的修改只是通过<code>git add</code>添加到了暂存区，还没有提交，想撤销掉暂存区的修改(unstage),可以输入：</p>
<pre><code>git reset HEAD &lt;filename&gt;
</code></pre><p>可以把暂存区的修改撤销掉（unstage），重新把修改放回工作区,操作后，暂存区是干净的(暂存区的目录树会被重写，被master分支指向的目录树所替换，但是工作区不受影响)工作区有修改;如果再想进一步的丢弃工作区的修改可以参照上面<strong>工作区修改回退</strong><br><code>git reset</code>命令既可以回退版本，也可以把暂存区的修改回退到工作区。当我们用<code>HEAD</code>时，表示最新的版本</p>
</li>
</ol>
<h5 id="u5E38_u7528_u7684_u5404_u79CD_u573A_u666F_u56DE_u9000_u547D_u4EE4_u64CD_u4F5C_u6D41_u7A0B"><a href="#u5E38_u7528_u7684_u5404_u79CD_u573A_u666F_u56DE_u9000_u547D_u4EE4_u64CD_u4F5C_u6D41_u7A0B" class="headerlink" title="常用的各种场景回退命令操作流程"></a>常用的各种场景回退命令操作流程</h5><ol>
<li><p>修改了工作区，丢弃工作区的修改：</p>
<pre><code>modify code in filename of working dir 
git checkout --filename
</code></pre></li>
<li><p>修改了工作区，并add到了暂存区了，丢弃暂存区的修改：</p>
<pre><code>modify code in filename of working dir 
git add
git reset HEAD filename
</code></pre><p>如果想进一步丢弃暂存区回退到工作区的修改：</p>
<pre><code>git checkout -- filenmae
</code></pre><p>至此，工作区与版本库中一样了</p>
</li>
<li><p>修改了工作区，并add到了暂存区了，又修改工作区，丢弃工作区的修改：</p>
<pre><code>modify code in filename of working dir 
git add
modify code in filename of workding dir again
git checkout -- filenmae
</code></pre><p>如果又想丢弃暂存区的修改，继续输入：</p>
<pre><code>git reset HEAD filename
</code></pre><p>如果继续想把暂存区回退到工作区的修改也丢弃掉，继续输入：</p>
<pre><code>git checkout -- filenmae
</code></pre><p>至此，工作区与版本库中一样了</p>
</li>
<li><p>修改了工作区，并commit到仓库，撤销掉仓库的指定commit:</p>
<pre><code>modify code in filename of working dir
git add
git commit
git log
git reset --hard commit_id
</code></pre><p>如果突然发现是误撤销，又想回到之前的状态：</p>
<pre><code>git reflog
git reset --hard commit_id
</code></pre></li>
</ol>
<h4 id="u5206_u652F_u7BA1_u7406"><a href="#u5206_u652F_u7BA1_u7406" class="headerlink" title="分支管理"></a>分支管理</h4><p>每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。默认情况下，只有一条时间线，在Git里，这个分支叫主分支，即master分支。HEAD严格来说不是指向提交，而是指向master，master才是指向提交的，所以，HEAD指向的就是当前分支</p>
<h5 id="u5206_u652F_u64CD_u4F5C_u547D_u4EE4"><a href="#u5206_u652F_u64CD_u4F5C_u547D_u4EE4" class="headerlink" title="分支操作命令"></a>分支操作命令</h5><p>创建branchname分支，并切换到该分支：</p>
<pre><code>git checkout -b &lt;branchname&gt;
</code></pre><blockquote>
<p><code>git checkout</code>命令加上<code>-b</code>参数表示创建并切换，相当于以下两条命令：</p>
<pre><code>git branch &lt;branchname&gt;
git checkout &lt;branchname&gt;
</code></pre><p><code>git branch &lt;branchname&gt;</code>：表示创建指定分支<br><code>git checkout &lt;branchname&gt;</code>：表示切换到指定分支</p>
</blockquote>
<p>查看当前分支：</p>
<pre><code>git branch
</code></pre><blockquote>
<p>该命令会列出所有分支，当前分支前面会标一个*号</p>
</blockquote>
<p>合并branchname分支：</p>
<pre><code>git merge &lt;branchname&gt;
</code></pre><blockquote>
<p><code>git merge</code>命令用于合并指定分支到当前分支(当前git的工作分支，即最后一次<code>git checkout &lt;branchname&gt;</code>)。合并后被合并的分支和当前分支就一样了<br>默认情况下，是进行“快进模式”的合并，也就是直接把master（当前分支）指向dev(被合并的分支)的当前提交，所以合并速度非常快<br>Git会用Fast forward模式，但这种模式下，删除分支后，会丢掉分支信息。<br>如果要强制禁用FF模式，可以增加<code>--no-ff</code>参数，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息</p>
</blockquote>
<p>删除branchname分支：</p>
<pre><code>git branch -d &lt;branchname&gt;
</code></pre><blockquote>
<p><code>-D</code>参数强行删除分支</p>
</blockquote>
<p>保存当前工作现场：</p>
<pre><code>git stash
</code></pre><p>查看保存的工作现场：</p>
<pre><code>git stash list
</code></pre><p>恢复现场：</p>
<pre><code>git stash pop
</code></pre><blockquote>
<p>该命令会在恢复的同时把stash内容也删了，等同于下面两个命令：</p>
<pre><code>git stash apply 恢复现场单并不删除stash内容
git stash drop 删除stash内容
</code></pre><p>可以多次stash,先用<code>git stash list</code>查看，然后恢复指定的stash，用命令：<br>    git stash apply stash@{stash_id}</p>
</blockquote>
<h5 id="u5E38_u7528_u7684_u5404_u79CD_u573A_u666F_u5206_u652F_u547D_u4EE4_u64CD_u4F5C_u6D41_u7A0B"><a href="#u5E38_u7528_u7684_u5404_u79CD_u573A_u666F_u5206_u652F_u547D_u4EE4_u64CD_u4F5C_u6D41_u7A0B" class="headerlink" title="常用的各种场景分支命令操作流程"></a>常用的各种场景分支命令操作流程</h5><ol>
<li><p>创建dev分支，修改提交代码后再合并到master分支：</p>
<pre><code>git branch dev
git checkout dev 
(or git checkout -b dev)
modifty code in dev branch
git add
git commit

git checkout master
git merge dev 
git branch -d dev
</code></pre></li>
<li><p>master分支和dev分支各自都分别有各自的代码修改和新的提交,并有冲突:</p>
<pre><code>git branch dev
git checkout dev 
(or git checkout -b dev)
modify code in dev branch
git add
git commit

git master
modify code in master branch 
git add
git commit

git merge dev (master modify is conflict with dev modify)
</code></pre><p>产生冲突后,手动解决后，再在当前master上提交,并删除dev分支即可：</p>
<pre><code>git add 
git commit
git branch -d dev   
</code></pre><blockquote>
<p>使用<code>git log --graph</code>可以看到分支合并图</p>
</blockquote>
</li>
<li><p>修改dev分支时候，需要修改master分支上的bug,先保存现场，再修改bug,最后恢复现场:</p>
<pre><code>git stash

git checkout master
git checkout -b bug
modify code in bug branch
git add
git commit

git checkout master
git merge bug
git branch -d bug

git checkout dev
git stash pop
</code></pre></li>
</ol>
<h4 id="u6807_u7B7E_u7BA1_u7406"><a href="#u6807_u7B7E_u7BA1_u7406" class="headerlink" title="标签管理"></a>标签管理</h4><p>发布一个版本时，我们通常先在版本库中打一个标签，这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照</p>
<h5 id="u521B_u5EFA_u6807_u7B7E"><a href="#u521B_u5EFA_u6807_u7B7E" class="headerlink" title="创建标签"></a>创建标签</h5><p>首先切换到需要打标签的分支上,输入下面命令即可：</p>
<pre><code>git tag [-a] &lt;tagname&gt; [-m] [commit_id]
</code></pre><blockquote>
<p><code>git tag &lt;tagname&gt;</code>命令默认标签是打在最新提交的commit上的,给历史提交打标签可以加上<code>commit_id</code>可选项，选择要打标签的commit id即可<br>还可以创建带有说明的标签，用<code>-a</code>可选参数指定标签名，<code>-m</code>可选参数指定说明文字<br>还可以通过<code>-s</code>可选参数用私钥签名一个标签<br>查看该分支下的所有标签：</p>
</blockquote>
<pre><code>git tag
</code></pre><p>查看标签信息：</p>
<pre><code>git show &lt;tagname&gt;
</code></pre><h5 id="u5220_u9664_u6807_u7B7E"><a href="#u5220_u9664_u6807_u7B7E" class="headerlink" title="删除标签"></a>删除标签</h5><p>创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除:</p>
<pre><code>git tag -d &lt;tagname&gt;
</code></pre><h5 id="u8FDC_u7A0B_u6807_u7B7E"><a href="#u8FDC_u7A0B_u6807_u7B7E" class="headerlink" title="远程标签"></a>远程标签</h5><p>如果要把标签推送到远程可以用：</p>
<pre><code>git push origin &lt;tagname&gt;
</code></pre><p>也可以一次性推送所有的本地标签：</p>
<pre><code>git push origin --tags
</code></pre><p>如果要删除远程的标签，要分两步：<br>Step 1: 先从本地删除：</p>
<pre><code>git tag -d &lt;tagname&gt;
</code></pre><p>Step 2: 从远程删除：</p>
<pre><code>git push origin :refs/tags/&lt;tagname&gt;
</code></pre><h3 id="u8FDC_u7A0B_u4ED3_u5E93_u7BA1_u7406"><a href="#u8FDC_u7A0B_u4ED3_u5E93_u7BA1_u7406" class="headerlink" title="远程仓库管理"></a>远程仓库管理</h3><h4 id="u5173_u8054_u672C_u5730_u4ED3_u5E93_u5230_u8FDC_u7A0B_u4ED3_u5E93"><a href="#u5173_u8054_u672C_u5730_u4ED3_u5E93_u5230_u8FDC_u7A0B_u4ED3_u5E93" class="headerlink" title="关联本地仓库到远程仓库"></a>关联本地仓库到远程仓库</h4><ol>
<li><p>登陆GitHub,点击<code>Create a new repo</code>创建一个新的仓库,在本地仓库运行：</p>
<pre><code>git remote add origin git@server-name:path/repo-name.git
</code></pre><blockquote>
<p>添加后，远程库的名字就是origin，这是Git默认的叫法，也可以改成别的，但是origin这个名字一看就知道是远程库</p>
</blockquote>
</li>
<li><p>推送本地库内容到新建的远程仓库</p>
<pre><code>git push -u origin master
</code></pre><blockquote>
<p>由于远程库是空的，我们第一次推送master分支时，加上了<code>-u</code>参数，Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来，在以后的推送或者拉取时就可以简化命令</p>
</blockquote>
</li>
<li>以后每次修改本地代码后，就可以将本地的master分支最新修改推送栋GitHub了：<pre><code>git push origin master
</code></pre></li>
</ol>
<h4 id="u4ECE_u8FDC_u7A0B_u4ED3_u5E93_u514B_u9686_u5230_u672C_u5730_u4ED3_u5E93"><a href="#u4ECE_u8FDC_u7A0B_u4ED3_u5E93_u514B_u9686_u5230_u672C_u5730_u4ED3_u5E93" class="headerlink" title="从远程仓库克隆到本地仓库"></a>从远程仓库克隆到本地仓库</h4><p>当你从远程仓库克隆时，实际上Git自动把本地的master分支和远程的master分支对应起来了，并且，远程仓库的默认名称是origin，克隆命令：</p>
<pre><code>git clone &lt;github_addrs&gt;
</code></pre><blockquote>
<p>Git支持多种协议，默认的git://使用ssh，通过ssh支持的原生git协议速度最快,但也可以使用https等其他协议，使用https除了速度慢以外，还有个最大的麻烦是每次推送都必须输入口令</p>
</blockquote>
<h4 id="u4ECE_u8FDC_u7A0B_u83B7_u53D6_u6700_u65B0_u7248_u672C_u5230_u672C_u5730"><a href="#u4ECE_u8FDC_u7A0B_u83B7_u53D6_u6700_u65B0_u7248_u672C_u5230_u672C_u5730" class="headerlink" title="从远程获取最新版本到本地"></a>从远程获取最新版本到本地</h4><pre><code>git fetch
</code></pre><blockquote>
<p>从远程获取最新版本到本地，不会自动merge</p>
</blockquote>
<pre><code>git pull
</code></pre><blockquote>
<p>从远程获取最新版本并merge到本地, 其命令相当于：</p>
<pre><code>git fetch
git merge
</code></pre></blockquote>
<h4 id="u67E5_u770B_u8FDC_u7A0B_u5E93_u4FE1_u606F"><a href="#u67E5_u770B_u8FDC_u7A0B_u5E93_u4FE1_u606F" class="headerlink" title="查看远程库信息"></a>查看远程库信息</h4><pre><code>git remote 
</code></pre><blockquote>
<p>想查看更详细的信息可以加上<code>-v</code>参数</p>
</blockquote>
<h4 id="u4F7F_u7528_u8FDC_u7A0B_u4ED3_u5E93_u7684_u4E00_u822C_u6D41_u7A0B"><a href="#u4F7F_u7528_u8FDC_u7A0B_u4ED3_u5E93_u7684_u4E00_u822C_u6D41_u7A0B" class="headerlink" title="使用远程仓库的一般流程"></a>使用远程仓库的一般流程</h4><ol>
<li>可以试图用<code>git push origin &lt;branchname&gt;</code>推送自己的修改</li>
<li>如果推送失败，则因为远程仓库分支比你的本地仓库更新，需要先用<code>git pull</code>试图合并<blockquote>
<p>如果<code>git pull</code>提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream &lt;branchname&gt; origin/&lt;branchname&gt;</code></p>
</blockquote>
</li>
<li>如果合并有冲突，则解决冲突，并在本地提交</li>
<li>没有冲突或者解决掉冲突后，再用<code>git push origin &lt;branchname&gt;</code>推送就能成功</li>
</ol>
<h2 id="u53C2_u8003"><a href="#u53C2_u8003" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.liaoxuefeng.com/" target="_blank" rel="external">liaoxuefeng</a><br><a href="http://selfcontroller.iteye.com/blog/1786644" target="_blank" rel="external">git 缓存区的理解</a><br><a href="http://gitref.org/index.html" target="_blank" rel="external">git reference</a><br><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="external">Pro Git book</a><br><a href="http://git.oschina.net/wzw/git-quick-start" target="_blank" rel="external">git-quick-start</a></p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Git/" rel="tag">#Git</a>
          
            <a href="/tags/GitHub/" rel="tag">#GitHub</a>
          
            <a href="/tags/SVN/" rel="tag">#SVN</a>
          
            <a href="/tags/版本管理/" rel="tag">#版本管理</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/01/22/Markdown进阶/" rel="next" title="Markdown进阶">
                <i class="fa fa-chevron-left"></i> Markdown进阶
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/01/23/Git使用总结/"
     data-title="Git使用总结"
     data-content=""
     data-url="http://www.franktly.com/2016/01/23/Git使用总结/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/01/23/Git使用总结/"
           data-title="Git使用总结" data-url="http://www.franktly.com/2016/01/23/Git使用总结/">
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/luckydog.jpg" alt="Frank Tao" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Frank Tao</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Hello World</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/franktly" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/tao-ling-yang" target="_blank">
                  
                    <i class="fa fa-globe"></i> ZhiHu
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2273442920/profile?topnav=1&wvr=6&is_all=1" target="_blank">
                  
                    <i class="fa fa-globe"></i> WeiBo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Git_u7B80_u4ECB"><span class="nav-number">1.</span> <span class="nav-text">Git简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#u96C6_u4E2D_u5F0FVS_u5206_u5E03_u5F0F"><span class="nav-number">1.1.</span> <span class="nav-text">集中式VS分布式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#u96C6_u4E2D_u5F0F"><span class="nav-number">1.1.1.</span> <span class="nav-text">集中式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u5206_u5E03_u5F0F"><span class="nav-number">1.1.2.</span> <span class="nav-text">分布式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Git_u5DE5_u4F5C_u533A_26amp_3B_u6682_u5B58_u533A_26amp_3B_u7248_u672C_u5E93"><span class="nav-number">1.2.</span> <span class="nav-text">Git工作区&暂存区&版本库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Git_u5E38_u7528_u64CD_u4F5C"><span class="nav-number">2.</span> <span class="nav-text">Git常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#u672C_u5730_u4ED3_u5E93Repository_u7BA1_u7406"><span class="nav-number">2.1.</span> <span class="nav-text">本地仓库Repository管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#u521D_u59CB_u5316Git_u4ED3_u5E93"><span class="nav-number">2.1.1.</span> <span class="nav-text">初始化Git仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u6DFB_u52A0_u6587_u4EF6_u5230Git_u4ED3_u5E93"><span class="nav-number">2.1.2.</span> <span class="nav-text">添加文件到Git仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u5220_u9664Git_u4ED3_u5E93_u4E2D_u7684_u6587_u4EF6"><span class="nav-number">2.1.3.</span> <span class="nav-text">删除Git仓库中的文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u67E5_u770B_u7248_u672C_u72B6_u6001"><span class="nav-number">2.1.4.</span> <span class="nav-text">查看版本状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u64CD_u4F5C_u56DE_u9000"><span class="nav-number">2.1.5.</span> <span class="nav-text">操作回退</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#u7248_u672C_u56DE_u9000"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">版本回退</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#u4FEE_u6539_u56DE_u9000"><span class="nav-number">2.1.5.2.</span> <span class="nav-text">修改回退</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#u5E38_u7528_u7684_u5404_u79CD_u573A_u666F_u56DE_u9000_u547D_u4EE4_u64CD_u4F5C_u6D41_u7A0B"><span class="nav-number">2.1.5.3.</span> <span class="nav-text">常用的各种场景回退命令操作流程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u5206_u652F_u7BA1_u7406"><span class="nav-number">2.1.6.</span> <span class="nav-text">分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#u5206_u652F_u64CD_u4F5C_u547D_u4EE4"><span class="nav-number">2.1.6.1.</span> <span class="nav-text">分支操作命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#u5E38_u7528_u7684_u5404_u79CD_u573A_u666F_u5206_u652F_u547D_u4EE4_u64CD_u4F5C_u6D41_u7A0B"><span class="nav-number">2.1.6.2.</span> <span class="nav-text">常用的各种场景分支命令操作流程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u6807_u7B7E_u7BA1_u7406"><span class="nav-number">2.1.7.</span> <span class="nav-text">标签管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#u521B_u5EFA_u6807_u7B7E"><span class="nav-number">2.1.7.1.</span> <span class="nav-text">创建标签</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#u5220_u9664_u6807_u7B7E"><span class="nav-number">2.1.7.2.</span> <span class="nav-text">删除标签</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#u8FDC_u7A0B_u6807_u7B7E"><span class="nav-number">2.1.7.3.</span> <span class="nav-text">远程标签</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#u8FDC_u7A0B_u4ED3_u5E93_u7BA1_u7406"><span class="nav-number">2.2.</span> <span class="nav-text">远程仓库管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#u5173_u8054_u672C_u5730_u4ED3_u5E93_u5230_u8FDC_u7A0B_u4ED3_u5E93"><span class="nav-number">2.2.1.</span> <span class="nav-text">关联本地仓库到远程仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u4ECE_u8FDC_u7A0B_u4ED3_u5E93_u514B_u9686_u5230_u672C_u5730_u4ED3_u5E93"><span class="nav-number">2.2.2.</span> <span class="nav-text">从远程仓库克隆到本地仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u4ECE_u8FDC_u7A0B_u83B7_u53D6_u6700_u65B0_u7248_u672C_u5230_u672C_u5730"><span class="nav-number">2.2.3.</span> <span class="nav-text">从远程获取最新版本到本地</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u67E5_u770B_u8FDC_u7A0B_u5E93_u4FE1_u606F"><span class="nav-number">2.2.4.</span> <span class="nav-text">查看远程库信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#u4F7F_u7528_u8FDC_u7A0B_u4ED3_u5E93_u7684_u4E00_u822C_u6D41_u7A0B"><span class="nav-number">2.2.5.</span> <span class="nav-text">使用远程仓库的一般流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#u53C2_u8003"><span class="nav-number">3.</span> <span class="nav-text">参考</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Frank Tao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"franktly"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
